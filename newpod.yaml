apiVersion: v1
kind: Pod
metadata:
  name: working-pod4-1
spec:
  containers:
    - name: new-container
      env:
       - name: PASSWDFILE
         value: "root/tconfig-file.conf"
      image: nlingareddy/ssh-login-node
      volumeMounts:
        - name: config-vol
          mountPath:  /root/tconfig-file.conf
          subPath: tconfig-file.conf  
      command: ["/bin/sh", "-c"]
      args:
        -  cp $PASSWDFILE pas.conf;
           vi pas.conf +w +q;
           ./config/init/new.sh pas.conf;
           tail -f /dev/null; 
  volumes:
    - name: config-vol 
      configMap: 
        name: new2-config
        items: 
         - key: tconfig-file.conf
           path: tconfig-file.conf
